(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{19:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){e.exports=a.p+"static/media/pizza.300d72e2.jpg"},24:function(e,t,a){e.exports=a.p+"static/media/pasta.5c056c7e.jpg"},25:function(e,t,a){e.exports=a.p+"static/media/focaccia.3744b6d6.jpg"},26:function(e,t,a){e.exports=a.p+"static/media/antipasti.95e03e48.jpg"},27:function(e,t,a){e.exports=a.p+"static/media/tiramisu.d84bb0ab.jpg"},31:function(e,t,a){e.exports=a(46)},33:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(1),r=(a(33),a(2)),o=(a(19),a(23)),i=a.n(o),s=a(24),u=a.n(s),m=a(25),d=a.n(m),p=a(26),E=a.n(p),h=a(27),b=a.n(h),f=Object(n.createContext)(null),g=function(){var e=Object(n.useContext)(f),t=e.token,a=e.setProducts;return Object(n.useEffect)((function(){console.log(t),fetch("/products",{headers:{"content-type":"application/json","x-auth":t}}).then((function(e){return e.json()})).then((function(e){a(e.products),console.log(e)}))}),[t]),l.a.createElement("div",{className:"products"},l.a.createElement("div",{className:"container-component-products"},l.a.createElement(r.b,{to:"/products/Pizza"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"imgCard"},l.a.createElement("img",{src:i.a,alt:"pizza",width:"300",height:"200"})),l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Pizza")))),l.a.createElement(r.b,{to:"/products/Pasta"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"imgCard"},l.a.createElement("img",{src:u.a,alt:"pasta",width:"300",height:"200"})),l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Pasta")))),l.a.createElement(r.b,{to:"/products/Focaccia"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"imgCard"},l.a.createElement("img",{src:d.a,alt:"focaccia",width:"300",height:"200"})),l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Focaccia")))),l.a.createElement(r.b,{to:"/products/Antipasti"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"imgCard"},l.a.createElement("img",{src:E.a,alt:"antipasti",width:"300",height:"200"})),l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Antipasti")))),l.a.createElement(r.b,{to:"/products/Desserts"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"imgCard"},l.a.createElement("img",{src:b.a,alt:"tiramisu",width:"300",height:"200"})),l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Desserts"))))))},v=a(8);a(39);function j(){var e=Object(n.useContext)(f),t=e.client,a=e.setClient,c=e.cookies;return console.log("cookies:"+c),Object(n.useEffect)((function(){var e=localStorage.getItem("id");e&&fetch("/clients/".concat(e)).then((function(e){return e.json()})).then((function(e){console.log(e),a(e.client)}))}),[]),console.log(t,"from Homepage"),l.a.createElement("div",{className:"main-container"},c?l.a.createElement("div",{className:"home-main"},l.a.createElement("div",{className:"home-container"},l.a.createElement("h1",null,"Benvenuti in Italia"),l.a.createElement("h1",null,'Benvenuti al Ristorante "Quel Mazzolin di Fiori"'))):l.a.createElement("div",{className:"home-main"},l.a.createElement("div",{className:"home-container"},l.a.createElement("h1",null,"Benvenuti in Italia"),l.a.createElement("h1",null,'Benvenuti al Ristorante "Quel Mazzolin di Fiori"'),l.a.createElement("h2",null,"Please register or login to make your order"))))}var O=a(7),N=a.n(O),S=a(10),C=a(14);a(41);function y(){var e=Object(n.useContext)(f),t=e.cart,a=e.setCart,c=(e.user,e.status),r=e.setStatus,o=e.client,i=(e.order,e.setOrder);console.log(t);var s=function(e){var n=Object(C.a)(t);n.splice(e,1),a(n)},u=t.reduce((function(e,t){return e+t.product.price}),0),m=function(){var e=Object(S.a)(N.a.mark((function e(n){var l,c,s,u,m;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),l=t.map((function(e){return e.id})),c={order:l,client:o._id},console.log(l),s={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(c)},e.next=7,fetch("/orders",s);case 7:return u=e.sent,e.next=10,u.json();case 10:m=e.sent,console.log(m),m.success&&(r(!0),i(m),a([]));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"cart"},c?l.a.createElement(v.a,{to:"/checkout"}):l.a.createElement("ul",{className:"container-cart"},t?t.map((function(e){return l.a.createElement("div",{className:"product-card"},l.a.createElement("img",{src:e.product.img,alt:e.product.name,width:"200",height:"100"}),l.a.createElement("li",null,"Type: ",e.product.type),l.a.createElement("li",null,"Name: ",e.product.name),l.a.createElement("li",null,"Price: ",e.product.price,"\u20ac"),l.a.createElement("button",{onClick:s},"Remove"))})):l.a.createElement("h1",null,"Add your desired product first")),t&&t.length>0?l.a.createElement("div",{className:"total"},l.a.createElement("h1",null,"Total: ",u," \u20ac"),l.a.createElement("button",{onClick:m},"CheckOut")):null)}a(21);function x(){var e=Object(n.useContext)(f),t=(e.setCookies,e.cookies),a=e.client,r=e.order,o=(e.setClient,e.logout,Object(n.useState)([])),i=Object(c.a)(o,2);i[0],i[1];return console.log(a,"from account"),console.log(r),l.a.createElement("div",null,t?l.a.createElement("div",{className:"account"},l.a.createElement("h1",null,"Hi ",a.firstName),l.a.createElement("h2",null,"Your details"),l.a.createElement("h3",null,"Firstname: ",a.firstName),l.a.createElement("h3",null,"Lastname: ",a.lastName),l.a.createElement("h3",null,"Email: ",a.email),l.a.createElement("h3",null,"Address: ",a.street),l.a.createElement("h3",null,"Zipcode: ",a.zipCode),l.a.createElement("h3",null,"Your Orders:")):null)}a(42);function k(e){var t=Object(n.useContext)(f),a=t.products,r=t.filteredProduct,o=t.setFilteredProduct,i=t.cart,s=t.setCart,u=(t.client,t.cookies);console.log(e);var m=Object(n.useState)(1),d=Object(c.a)(m,2);d[0],d[1];Object(n.useEffect)((function(){!function(){var t=a&&a.filter((function(t){return t.type===e.match.params.name}));o(t),console.log(t)}()}),[]);return l.a.createElement("div",{className:"eachproduct"},u?l.a.createElement("ul",{className:"container-products"},r&&r.length>0?r.map((function(e,t){return l.a.createElement("div",{key:t,className:"product-card"},l.a.createElement("img",{src:e.img,alt:e.name,width:"200",height:"100"}),l.a.createElement("li",null,"Type: ",e.type),l.a.createElement("li",null,"Name: ",e.name),l.a.createElement("li",null,"Price: ",e.price," \u20ac"),l.a.createElement("button",{onClick:function(){!function(e){var t={id:e._id,product:e};s([].concat(Object(C.a)(i),[t])),alert("Added")}(e)}},"Add to Cart"))})):null):l.a.createElement("h1",null,"Please Login or Register to make your order"))}function w(){var e=Object(n.useContext)(f),t=(e.status,e.setStatus);return Object(n.useEffect)((function(){t(!1)})),l.a.createElement("div",{className:"checkout"},l.a.createElement("h1",null,"Thank you for your Purchase"))}function P(){var e=Object(n.useContext)(f),t=e.token,a=(e.logout,e.cookies),c=e.client;console.log(c,"from admin");return l.a.createElement("div",{className:"admin"},a?l.a.createElement("div",null,l.a.createElement("h1",null,"Get all Clients"),l.a.createElement("button",{onClick:function(){fetch("/clients",{headers:{"content-type":"application/json","x-auth":t}}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}},"Get all clients"),l.a.createElement("h1",null,"Get all Orders"),l.a.createElement("button",{onClick:function(){fetch("/orders",{headers:{"content-type":"application/json","x-auth":t}}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}},"Get all orders"),l.a.createElement("button",null,"Add a Product")):null)}a(22);var z=function(){var e=Object(n.useContext)(f),t=e.setToken,a=e.client,r=e.setClient,o=e.cookies,i=e.setCookies;console.log("cookies:"+o);var s=Object(n.useState)(null),u=Object(c.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(null),E=Object(c.a)(p,2),h=E[0],b=E[1],g=Object(n.useState)(!0),j=Object(c.a)(g,2),O=j[0],C=j[1],y=function(){var e=Object(S.a)(N.a.mark((function e(a){var n,l,c,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n={email:m,password:h},l={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)},e.next=5,fetch("/clients/login",l);case 5:return c=e.sent,e.next=8,c.json();case 8:o=e.sent,console.log(o,"This is data login"),o.success?(t(o.token),r(o.client),localStorage.setItem("login",!0),localStorage.setItem("id",o.client._id),i(!0),C(!0)):C(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"form-container"},o&&a&&"Admin"===a.role?l.a.createElement(v.a,{to:"/admin"}):null,o&&a&&"User"===a.role?l.a.createElement(v.a,{to:"/account"}):null,l.a.createElement("div",{className:"loginoflogin"},l.a.createElement("div",{className:"login-form"},l.a.createElement("h1",null,"Log in"),l.a.createElement("form",{onSubmit:y,className:"login"},l.a.createElement("label",null,"E-Mail:",l.a.createElement("input",{type:"email",id:"email-login",name:"email",onChange:function(e){return d(e.target.value)},required:!0})),l.a.createElement("label",null,"Password:",l.a.createElement("input",{type:"password",id:"password-login",name:"password",onChange:function(e){return b(e.target.value)},required:!0})),l.a.createElement("button",{type:"submit"},"Log In"),O?null:l.a.createElement("p",null,"Wrong email or wrong password")))))};function A(){var e=Object(n.useContext)(f),t=e.setToken,a=e.client,r=e.setClient,o=e.cookies,i=e.setCookies;console.log("cookies:"+o);var s=Object(n.useState)(null),u=Object(c.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(null),E=Object(c.a)(p,2),h=E[0],b=E[1],g=Object(n.useState)(null),j=Object(c.a)(g,2),O=j[0],C=j[1],y=Object(n.useState)(null),x=Object(c.a)(y,2),k=x[0],w=x[1],P=Object(n.useState)(null),z=Object(c.a)(P,2),A=z[0],T=z[1],I=Object(n.useState)(null),q=Object(c.a)(I,2),F=q[0],L=q[1],B=Object(n.useState)(null),D=Object(c.a)(B,2),J=D[0],M=D[1],R=Object(n.useState)(!0),G=Object(c.a)(R,2),U=G[0],Y=G[1],_=Object(n.useState)(""),H=Object(c.a)(_,2),Q=H[0],Z=H[1],W=Object(n.useState)(""),K=Object(c.a)(W,2),V=K[0],X=K[1],$=Object(n.useState)(""),ee=Object(c.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),le=Object(c.a)(ne,2),ce=(le[0],le[1],function(){var e=Object(S.a)(N.a.mark((function e(a){var n,l,c,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n={firstName:m,lastName:h,email:O,password:k,phoneNumber:J,street:A,zipCode:F},l={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)},e.next=5,fetch("/clients",l);case 5:return c=e.sent,e.next=8,c.json();case 8:o=e.sent,console.log(o,"This is data signup"),o.success&&(t(o.token),r(o.client),localStorage.setItem("login",!0),localStorage.setItem("id",o.client._id),i(!0),Y(!0)),o.message&&(Y(!1),X(null),ae(null),o.message.map((function(e){e.email&&Z(e.email),e.password&&X(e.password)}))),o.err&&(Y(!1),X(null),Z(null),ae(o.err));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return l.a.createElement("div",{className:"form-container"},o&&a&&"Admin"===a.role?l.a.createElement(v.a,{to:"/admin"}):null,o&&a&&"User"===a.role?l.a.createElement(v.a,{to:"/account"}):null,l.a.createElement("div",{className:"signup-form"},l.a.createElement("h1",null,"Sign up"),l.a.createElement("form",{onSubmit:ce,className:"login"},l.a.createElement("label",null,"First Name:",l.a.createElement("input",{type:"text",id:"first-name",name:"firstName",onChange:function(e){return d(e.target.value)},required:!0})),l.a.createElement("label",null,"Last Name:",l.a.createElement("input",{type:"text",id:"last-name",name:"lastName",onChange:function(e){return b(e.target.value)},required:!0})),l.a.createElement("label",null,"E-Mail:",l.a.createElement("input",{type:"email",id:"email",name:"email",onChange:function(e){return C(e.target.value)},required:!0})),!U&&Q?l.a.createElement("p",null,Q):null,!U&&te?l.a.createElement("p",null,"E-mail already exists"):null,l.a.createElement("label",null,"Password:",l.a.createElement("input",{type:"password",id:"password",name:"password",onChange:function(e){return w(e.target.value)},required:!0})),!U&&V?l.a.createElement("p",null,V):null,l.a.createElement("label",null,"Phone:",l.a.createElement("input",{type:"text",id:"phone",name:"phone",onChange:function(e){return M(e.target.value)},required:!0})),l.a.createElement("label",null,"Street and Number:",l.a.createElement("input",{type:"text",id:"street",name:"street",onChange:function(e){return T(e.target.value)},required:!0})),l.a.createElement("label",null,"Zipcode:",l.a.createElement("input",{type:"text",id:"zipcode",name:"zipCode",onChange:function(e){return L(e.target.value)},required:!0})),l.a.createElement("button",{type:"submit"},"Sign Up"))))}var T=function(){var e=Object(n.useState)(null),t=Object(c.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([]),s=Object(c.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)([]),p=Object(c.a)(d,2),E=p[0],h=p[1],b=Object(n.useState)([]),O=Object(c.a)(b,2),N=O[0],S=O[1],C=Object(n.useState)(!1),T=Object(c.a)(C,2),I=T[0],q=T[1],F=Object(n.useState)(0),L=Object(c.a)(F,2),B=L[0],D=L[1],J=Object(n.useState)(null),M=Object(c.a)(J,2),R=M[0],G=M[1],U=Object(n.useState)(!1),Y=Object(c.a)(U,2),_=Y[0],H=Y[1],Q=Object(n.useState)(!1),Z=Object(c.a)(Q,2),W=Z[0],K=Z[1],V=Object(n.useState)([]),X=Object(c.a)(V,2),$=X[0],ee=X[1];Object(n.useEffect)((function(){localStorage.getItem("login")&&H(!0)}),[]);var te=function(){fetch("/clients/logout"),localStorage.clear(),H(!1)};return l.a.createElement(f.Provider,{value:{logout:te,order:$,setOrder:ee,status:W,setStatus:K,setCookies:H,cookies:_,isLogged:I,setIsLogged:q,client:R,setClient:G,token:a,setToken:o,products:u,setProducts:m,cart:N,setCart:S,filteredProduct:E,setFilteredProduct:h,total:B,setTotal:D}},l.a.createElement(r.a,null,l.a.createElement("div",{className:"App"},l.a.createElement("header",null,l.a.createElement("h1",null,l.a.createElement("span",{className:"green"},"Quel")," ",l.a.createElement("span",{className:"white"},"Mazzolin di")," ",l.a.createElement("span",{className:"red"},"Fiori")),l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(r.b,{activeStyle:{color:"white"},to:"/"},"Home")),_?l.a.createElement("li",null,l.a.createElement(r.b,{activeStyle:{color:"white"},to:"/products"},"Products")):null,_&&R&&"User"===R.role?l.a.createElement("li",null,l.a.createElement(r.b,{activeStyle:{color:"white"},to:"/account"},"Your Account")):null,_?l.a.createElement("li",null,l.a.createElement(r.b,{activeStyle:{color:"white"},to:"/cart"},"Your Cart")):null,_&&R&&"Admin"===R.role?l.a.createElement("li",null,l.a.createElement(r.b,{activeStyle:{color:"white"},to:"/admin"},"Admin")):null,_?null:l.a.createElement("li",null,l.a.createElement(r.b,{activeStyle:{color:"white"},to:"/login"},"Login")),_?null:l.a.createElement("li",null,l.a.createElement(r.b,{activeStyle:{color:"white"},to:"/register"},"Register")),_?l.a.createElement("li",null,l.a.createElement(r.b,{onClick:te,activeStyle:{color:"white"},to:"/"},"Logout")):null))),l.a.createElement(v.d,null,l.a.createElement(v.b,{exact:!0,path:"/",component:j}),l.a.createElement(v.b,{exact:!0,path:"/products",component:g}),l.a.createElement(v.b,{exact:!0,path:"/products/:name",component:k}),l.a.createElement(v.b,{exact:!0,path:"/cart",component:y}),l.a.createElement(v.b,{exact:!0,path:"/account",component:x}),l.a.createElement(v.b,{exact:!0,path:"/checkout",component:w}),l.a.createElement(v.b,{exact:!0,path:"/admin",component:P}),l.a.createElement(v.b,{exact:!0,path:"/login",component:z}),l.a.createElement(v.b,{exact:!0,path:"/register",component:A})))))},I=a(30);a.n(I).a.render(l.a.createElement(T,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.931c2158.chunk.js.map